<html>
<head>
  <title>Directors Fuzzy Search Example</title>
  <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <script src="../lib/fuzzy.js"></script>
  <script src="directors.json"></script>

  <script type="text/javascript">

    function displayResults() {
      // The value we're searching for
      var search = $('#search').val();

      var options = {
          pre: "<b>"
        , post: "</b>"

        // Each element in directors is an object, not a string. We can pass in a
        // function that is called on each element in the array to extract the
        // string to fuzzy search against. In this case, element.dir
        , extract: function(element) {
            return element.dir;
          }
      }

      // Filter!
      var filtered = fuzzy.filter(search, directors, options);

      // Map the results to the html we want generated
      var results = filtered.slice(0,100).map(function(entry){
        return '<li><a href="http://freebase' + entry.original.fb + '">' + entry.string + '</a></li>';
      });

      // Update the html
      $('#lists').html(results.join(''));
    }

    $(function() {

      // List the initial characters
      displayResults();

      // Filter the characters on each change of the textbox
      $('#search').on({
          'keyup': displayResults
        , 'webkitspeechchange': displayResults
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>Search all Directors off of Freebase</h1>
    <input type="text" id="search" class="search" style="height:30px" x-webkit-speech></input>
    <ul id="lists">
    </ul>
  </div>
  </script>
</html>
